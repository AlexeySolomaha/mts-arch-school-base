# ADR.001 Выбор категория системы (ACID/BASE/CAP/PACELC)

* Статус: **Предложено**
* Владелец: **aisolomakh@mts.ru**

## Контекст
Необходимо хранить данные и управлять ими в приложении **сайт конференции helloconf**. В системе будут представлены данные двух типов:
* Информация о докладчиках и их материалах, расписание конференции.
* Материалы прошедших конференций.

## Варианты решения
### Вариант 1. BASE/CP, PA/EC - поддержка консистентности с устойчивостью к разделению.
Выбираем консистентность данных (C). Также при разделении останавливает запись, но доступна для чтения - устойчивость к разделению (P).
Скорость выдачи информации не столь важна, больший упор делаем на консистентности (важно авторство докладов, в докладах содержится техническая информация) - система PA/EC.
* **Плюсы**
  * Хорошо подходит для хранения редко обновляемых, но часто запрашиваемых данных - материалов с прошедших конференций.
  * Выдаёт полную, консистентную информацию (важно для планирования конференции).
* **Минусы**
  * Из-за ограничений на запись в разделённом состоянии невозможно производить работу с докладчиками и формировать расписание.
### Вариант 2. ACID/CA, PС/EC - поддержка консистентности и доступности.
Консистентность данных (С) и доступность (А). Недоступна в разделённом состоянии - это согласуется с **бизнес-метрикой 95% доступности**.
* **Плюсы**
  * Хорошо подходит для данных о докладчиках и расписании конференций - частое обновление и чтение при работе с кандидатами и их докладами, поддерживается полная консистентность информации.
* **Минусы**
  * Материалы прошедших мероприятий становятся недоступны в разделённом состоянии.
### Вариант 2. Совместное использование вариантов 1 и 2.
Так как вариант 1 (BASE/PE) больше подходит для хранения матералов прошедших мероприятий, в вариант 2 (ACID/CA) - для работы с данными по организации будущих мероприятий, то рассматривается вариант их совместного использования в системе.
* **Плюсы**
  * Данные хранятся в подсистемах с наиболее подходящим типом
  * Ретроспективные данные имеют большую доступность
  * Данные для организации конференций и кандидатов-докладчиков хорошо согласованы и будут обрабатываться при помощи транзакций
  * Подсистемы могут работать изолированно при необходимости
* **Минусы**
  * Больше затраты на обслуживание
  * Выше сложность поддержки разнородной системы 
  * Больше затраты на развёртывание системы
  * Большее количество баз данных
  * Больше затраты на мониторинг системы

## Решение
Для хранения и управления данными мы выбираем **ACID/CA, PС/E** вариант:
* Удобство работы с данными для организации конференций (работа с кандидататами-докладчиками и составление расписания конференции) имеет больший приоритет, чем удобство хранения документов прошедших мероприятий.
* Удовлетворяется требование 95% доступности системы, что также подходит и для ретроспективных данных (дополнительных мер по увеличению доступности таких данных на чтение не нужно).
* Затраты на поддержание двух типов систем храннения данных могут превышать пользу от их использования в  приложении **сайт конференции helloconf** для планируемого объёма данных в (**QR.008** - 2 конференции в месяц, **QR.009** - 100 рецензий докладов для каждой конференции, **QR.010** - материалы 100 докладов с каждой прошедшей конференции).